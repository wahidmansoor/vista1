import{c as v,D as Z,f as ee,B as C,g as se,h as te,i as ae,T as re,j as ne,k as Y,l as W,E as ge,s as Le,C as S,a as k,b as P,d as A}from"./module-cdu-BUS-kbPn.js";import{r as x,j as e,R as D}from"./react-vendor-B1d8dduC.js";import{z as J,b as fe,y as T,bm as Ve,Q as E,Y as Ue,bn as ce,a7 as $e,bo as ze,a6 as Be,a5 as qe,c as de,bp as Ye,bq as Ge,br as He,bs as Ke,bt as We,C as Q,bu as Je,bv as ve,bw as Qe,bx as Xe,by as Ze,bz as je,bA as ye,bB as be,bC as es,bD as ss,o as q,E as Ne,bE as H,p as ts,an as as,r as rs,aY as ns,_ as Se,a8 as is,bF as ls,aJ as os,bG as cs,bH as ds,aV as ms,bI as V,bJ as xs,bK as hs,aa as us,bL as ps,bM as gs,ad as fs,ae as vs,af as js,bN as we,v as ys}from"./vendor-COw5p1kA.js";import{C as me,T as Ce}from"./module-inpatient-B_qP0o7e.js";const bs="modulepreload",Ns=function(s){return"/"+s},xe={},$=function(t,a,d){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(a.map(i=>{if(i=Ns(i),i in xe)return;xe[i]=!0;const c=i.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":bs,c||(u.as="script"),u.crossOrigin="",u.href=i,r&&u.setAttribute("nonce",r),document.head.appendChild(u),c)return new Promise((y,p)=>{u.addEventListener("load",y),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})}))}function h(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return o.then(n=>{for(const r of n||[])r.status==="rejected"&&h(r.reason);return t().catch(h)})},Ss={currentSymptoms:[],painScore:0,familyMembers:[],advanceDirectives:[],favoriteSymptomIds:[],lastUpdated:new Date().toISOString()},Ae=x.createContext(void 0);function ws(s,t){switch(t.type){case"ADD_SYMPTOM":return{...s,currentSymptoms:[...s.currentSymptoms,t.payload],lastUpdated:new Date().toISOString()};case"UPDATE_SYMPTOM":return{...s,currentSymptoms:s.currentSymptoms.map(o=>o.id===t.payload.id?t.payload:o),lastUpdated:new Date().toISOString()};case"REMOVE_SYMPTOM":return{...s,currentSymptoms:s.currentSymptoms.filter(o=>o.id!==t.payload),lastUpdated:new Date().toISOString()};case"SET_PAIN_SCORE":return{...s,painScore:t.payload,lastUpdated:new Date().toISOString()};case"ADD_FAMILY_MEMBER":return{...s,familyMembers:[...s.familyMembers,t.payload],lastUpdated:new Date().toISOString()};case"UPDATE_FAMILY_MEMBER":return{...s,familyMembers:s.familyMembers.map(o=>o.id===t.payload.id?{...o,...t.payload.updates}:o),lastUpdated:new Date().toISOString()};case"REMOVE_FAMILY_MEMBER":return{...s,familyMembers:s.familyMembers.filter(o=>o.id!==t.payload),lastUpdated:new Date().toISOString()};case"UPDATE_ADVANCE_DIRECTIVE":const d=s.advanceDirectives.findIndex(o=>o.id===t.payload.id)>=0?s.advanceDirectives.map(o=>o.id===t.payload.id?t.payload:o):[...s.advanceDirectives,t.payload];return{...s,advanceDirectives:d,lastUpdated:new Date().toISOString()};case"REMOVE_ADVANCE_DIRECTIVE":return{...s,advanceDirectives:s.advanceDirectives.filter(o=>o.id!==t.payload),lastUpdated:new Date().toISOString()};case"TOGGLE_FAVORITE":return{...s,favoriteSymptomIds:s.favoriteSymptomIds.includes(t.payload)?s.favoriteSymptomIds.filter(o=>o!==t.payload):[...s.favoriteSymptomIds,t.payload],lastUpdated:new Date().toISOString()};case"LOAD_STATE":return t.payload;default:return s}}function Cs({children:s}){const[t,a]=x.useReducer(ws,Ss);x.useEffect(()=>{const p=localStorage.getItem("palliativeCareState");if(p)try{const b=JSON.parse(p);a({type:"LOAD_STATE",payload:b})}catch(b){console.error("Error loading palliative care state:",b)}},[]),x.useEffect(()=>{localStorage.setItem("palliativeCareState",JSON.stringify(t))},[t]);const d=p=>{a({type:"ADD_SYMPTOM",payload:p})},o=p=>{a({type:"UPDATE_SYMPTOM",payload:p})},h=p=>{a({type:"REMOVE_SYMPTOM",payload:p})},n=p=>{a({type:"SET_PAIN_SCORE",payload:p})},r=p=>{a({type:"ADD_FAMILY_MEMBER",payload:p})},i=(p,b)=>{a({type:"UPDATE_FAMILY_MEMBER",payload:{id:p,updates:b}})},c=p=>{a({type:"REMOVE_FAMILY_MEMBER",payload:p})},l=p=>{a({type:"UPDATE_ADVANCE_DIRECTIVE",payload:p})},u=p=>{a({type:"REMOVE_ADVANCE_DIRECTIVE",payload:p})},y=p=>{a({type:"TOGGLE_FAVORITE",payload:p})};return e.jsx(Ae.Provider,{value:{state:t,addSymptom:d,updateSymptom:o,removeSymptom:h,setPainScore:n,addFamilyMember:r,updateFamilyMember:i,removeFamilyMember:c,updateAdvanceDirective:l,removeAdvanceDirective:u,toggleFavorite:y},children:s})}function ie(){const s=x.useContext(Ae);if(s===void 0)throw new Error("usePalliativeCare must be used within a PalliativeCareProvider");return s}const L={light:{primary:"#4f46e5",secondary:"#6b7280",accent:"#8b5cf6",background:"#ffffff",text:"#111827",error:"#ef4444",warning:"#f59e0b",success:"#10b981"},dark:{primary:"#818cf8",secondary:"#9ca3af",accent:"#a78bfa",background:"#1f2937",text:"#f9fafb",error:"#f87171",warning:"#fbbf24",success:"#34d399"}},As=(s="system")=>{const[t,a]=x.useState(()=>localStorage.getItem("palliative_theme")||s),[d,o]=x.useState(()=>{if(t==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;return L[n?"dark":"light"]}return L[t]});return x.useEffect(()=>{const n=window.matchMedia("(prefers-color-scheme: dark)"),r=()=>{t==="system"&&o(L[n.matches?"dark":"light"])};return n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[t]),x.useEffect(()=>{if(localStorage.setItem("palliative_theme",t),t==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;o(L[n?"dark":"light"])}else o(L[t])},[t]),{theme:t,colors:d,setTheme:a,toggleTheme:()=>{a(n=>{switch(n){case"light":return"dark";case"dark":return"system";case"system":return"light"}})}}},De=x.createContext(void 0),Ds=({children:s,defaultTheme:t="system"})=>{const a=As(t);return e.jsx(De.Provider,{value:a,children:e.jsx("div",{style:{colorScheme:a.theme==="system"?"light dark":a.theme},children:s})})},ks=()=>{const s=x.useContext(De);if(s===void 0)throw new Error("usePalliativeThemeContext must be used within a PalliativeThemeProvider");return s},K="palliative_active_tab",Ps=s=>{const[t,a]=x.useState(()=>localStorage.getItem(K)||s),[d,o]=x.useState(!1);return x.useEffect(()=>{localStorage.setItem(K,t)},[t]),{activeTab:t,isTransitioning:d,handleTabChange:r=>{o(!0),a(r),setTimeout(()=>{o(!1)},300)},resetNavigation:()=>{a(s),localStorage.removeItem(K)}}},Es=({onNext:s,onPrevious:t,onSave:a,onCancel:d,enabled:o=!0})=>{const h=x.useCallback(n=>{var l,u;if(!o||((l=document.activeElement)==null?void 0:l.tagName)==="INPUT"||((u=document.activeElement)==null?void 0:u.tagName)==="TEXTAREA")return;const{key:r,ctrlKey:i,metaKey:c}=n;r==="ArrowRight"&&s&&(n.preventDefault(),s()),r==="ArrowLeft"&&t&&(n.preventDefault(),t()),(i||c)&&r.toLowerCase()==="s"&&a&&(n.preventDefault(),a()),r==="Escape"&&d&&(n.preventDefault(),d())},[o,s,t,a,d]);return x.useEffect(()=>(window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)),[h]),{isEnabled:o,shortcuts:{next:"→",previous:"←",save:"⌘/Ctrl + S",cancel:"Esc"}}},Is={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"},Ms=({size:s="md",className:t})=>e.jsx(J,{className:v("animate-spin text-gray-400",Is[s],t)}),Ts=fe("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ke=x.forwardRef(({className:s,variant:t,...a},d)=>e.jsx("div",{ref:d,role:"alert",className:v(Ts({variant:t}),s),...a}));ke.displayName="Alert";const Pe=x.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:v("mb-1 font-medium leading-none tracking-tight",s),...t}));Pe.displayName="AlertTitle";const Ee=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:v("text-sm [&_p]:leading-relaxed",s),...t}));Ee.displayName="AlertDescription";const _s=({title:s="Error",message:t,className:a,variant:d="destructive"})=>e.jsxs(ke,{variant:d,className:v("flex items-center gap-2",a),children:[e.jsx(T,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx(Pe,{children:s}),e.jsx(Ee,{children:t})]})]}),Rs=[{key:"→",description:"Next tab"},{key:"←",description:"Previous tab"},{key:"⌘/Ctrl + S",description:"Save changes"},{key:"Esc",description:"Close dialog/Cancel"},{key:"?",description:"Show keyboard shortcuts"}],Os=()=>e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"icon",className:"rounded-full",title:"Keyboard Shortcuts",children:e.jsx(Ve,{className:"h-5 w-5"})})}),e.jsxs(se,{className:"sm:max-w-md",children:[e.jsx(te,{children:e.jsx(ae,{children:"Keyboard Shortcuts"})}),e.jsx("div",{className:"grid gap-4",children:Rs.map(({key:s,description:t})=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 rounded-lg bg-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-600",children:t}),e.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 border border-gray-200 rounded",children:s})]},s))})]})]}),Fs=D.lazy(()=>$(()=>Promise.resolve().then(()=>Ks),void 0)),Ls=D.lazy(()=>$(()=>Promise.resolve().then(()=>st),void 0)),Vs=D.lazy(()=>$(()=>Promise.resolve().then(()=>at),void 0)),Us=D.lazy(()=>$(()=>Promise.resolve().then(()=>ot),void 0)),$s=D.lazy(()=>$(()=>Promise.resolve().then(()=>pt),void 0)),M=[{id:"symptoms",label:"Symptom Control",icon:E,component:Fs},{id:"pain",label:"Pain Management",icon:Ue,component:Ls},{id:"psychosocial",label:"Psychosocial Care",icon:ce,component:$s},{id:"family",label:"Family Support",icon:ce,component:Vs},{id:"directives",label:"Advance Directives",icon:$e,component:Us}],zs=()=>{const{theme:s,toggleTheme:t}=ks(),d={light:qe,dark:Be,system:ze}[s];return e.jsx(C,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full",title:`Current theme: ${s}`,children:e.jsx(d,{className:"h-5 w-5"})})},Bs=()=>{const{activeTab:s,isTransitioning:t,handleTabChange:a}=Ps("symptoms"),d=M.findIndex(n=>n.id===s);return Es({onNext:()=>{d<M.length-1&&a(M[d+1].id)},onPrevious:()=>{d>0&&a(M[d-1].id)},enabled:!t}),e.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:"🕊️ Palliative Care Module"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Os,{}),e.jsx(zs,{})]})]}),e.jsxs(re,{value:s,onValueChange:a,className:"space-y-6",children:[e.jsx(ne,{className:"bg-white border",children:M.map(({id:n,label:r,icon:i})=>e.jsx(Y,{value:n,className:"data-[state=active]:bg-gray-100 data-[state=active]:text-gray-900",disabled:t,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:r})]})},n))}),M.map(({id:n,component:r})=>e.jsx(W,{value:n,className:"mt-6",forceMount:!0,children:e.jsx("div",{className:`
              transition-all duration-300 ease
              ${s===n?"opacity-100 translate-y-0":"opacity-0 translate-y-4 absolute"}
            `,children:e.jsx(ge,{moduleName:`Palliative Care - ${n}`,fallback:e.jsx(_s,{title:"Section Error",message:`There was an error loading the ${n} section. Please try refreshing the page.`}),children:e.jsx(D.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ms,{size:"lg"})}),children:e.jsx(r,{})})})})},n))]})]})},qs=()=>e.jsx(Ds,{children:e.jsx(Cs,{children:e.jsx(Bs,{})})}),yt=()=>e.jsx(ge,{moduleName:"Palliative Care",children:e.jsx(qs,{})});function Ys(s){const[t,a]=x.useState([]),[d,o]=x.useState(!0),[h,n]=x.useState(null);return x.useEffect(()=>{o(!0),n(null),(async()=>{let i=Le.from("palliative_symptoms").select("*").eq("status","active");s!=null&&s.category&&(i=i.eq("category_tag",s.category)),s!=null&&s.severity&&(i=i.eq("severity_level",s.severity)),s!=null&&s.search&&(i=i.ilike("symptom_name",`%${s.search}%`));const{data:c,error:l}=await i.order("symptom_name");l?n(l.message):a(c),o(!1)})()},[s==null?void 0:s.category,s==null?void 0:s.severity,s==null?void 0:s.search]),{data:t,loading:d,error:h}}const U=x.forwardRef(({className:s,type:t,...a},d)=>e.jsx("input",{type:t,className:v("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:d,...a}));U.displayName="Input";function Gs(s,t){return s.reduce((a,d)=>{const o=t(d);return a[o]||(a[o]=[]),a[o].push(d),a},{})}const Hs=()=>{const[s,t]=x.useState(""),{data:a,loading:d,error:o}=Ys({search:s.trim()?s:void 0}),h=Array.isArray(a)?a.filter(i=>i.status==="active"):[],n=x.useMemo(()=>Gs(h,i=>i.symptom_name),[h]),r=Object.keys(n);return x.useEffect(()=>{console.log("Fetched Supabase symptoms:",a)},[a]),d?e.jsxs("div",{className:"flex justify-center items-center py-16",children:[e.jsx(J,{className:"animate-spin w-8 h-8 text-gray-400"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Loading symptoms..."})]}):o?e.jsxs("div",{className:"flex flex-col items-center py-16",children:[e.jsx(T,{className:"w-8 h-8 text-red-500 mb-2"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["Error: ",o]})]}):Array.isArray(a)?e.jsxs("div",{className:"palliative-section max-w-5xl mx-auto",children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{type:"text",placeholder:"Search symptoms...",value:s,onChange:i=>t(i.target.value),className:"pl-10","aria-label":"Search symptoms"}),e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:e.jsx(J,{className:de("w-4 h-4",d&&"animate-spin")})})]})}),e.jsxs(re,{defaultValue:r[0]||"none",className:"w-full",children:[e.jsx(ne,{"aria-label":"Symptom groups",children:r.length>0?r.map(i=>e.jsx(Y,{value:i,children:i},i)):e.jsx(Y,{value:"none",disabled:!0,children:"No Symptoms"})}),r.length===0&&e.jsx(W,{value:"none",children:e.jsx("div",{className:"text-center py-16 text-gray-500",children:"No active symptoms recorded"})}),r.map(i=>e.jsx(W,{value:i,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n[i].map(c=>e.jsxs(S,{className:"border shadow-sm",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"text-lg",children:c.symptom_name}),e.jsx("span",{className:de("px-2 py-1 rounded text-xs font-semibold",c.severity_level==="Mild"&&"bg-green-100 text-green-700",c.severity_level==="Moderate"&&"bg-yellow-100 text-yellow-700",c.severity_level==="Severe"&&"bg-red-100 text-red-700"),children:c.severity_level})]})}),e.jsxs(A,{children:[e.jsx("div",{className:"prose prose-sm max-w-none mb-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:Ye.parse(c.management||"")}})}),c.is_red_flag&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-red-600",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Red Flag"})]}),c.preferred_route&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Preferred Route:"})," ",c.preferred_route,c.route_note&&e.jsx("span",{className:"ml-2 italic",children:c.route_note})]}),c.evidence_grade&&e.jsxs("div",{className:"mt-2 text-xs text-blue-500",children:[e.jsx("span",{className:"font-semibold",children:"Evidence:"})," ",c.evidence_grade]})]})]},c.id))})},i))]})]}):e.jsxs("div",{className:"flex flex-col items-center py-16",children:[e.jsx(T,{className:"w-8 h-8 text-red-500 mb-2"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Unexpected data format from Supabase."})]})},Ks=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),Ws=Ge,Ie=x.forwardRef(({className:s,...t},a)=>e.jsx(He,{ref:a,className:v("border-b",s),...t}));Ie.displayName="AccordionItem";const Me=x.forwardRef(({className:s,children:t,...a},d)=>e.jsx(Ke,{className:"flex",children:e.jsxs(We,{ref:d,className:v("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...a,children:[t,e.jsx(Q,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Me.displayName="AccordionTrigger";const Te=x.forwardRef(({className:s,children:t,...a},d)=>e.jsx(Je,{ref:d,className:v("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",s),...a,children:e.jsx("div",{className:"pb-4 pt-0",children:t})}));Te.displayName="AccordionContent";const le=x.forwardRef(({className:s,...t},a)=>e.jsxs(ve,{ref:a,className:v("relative flex w-full touch-none select-none items-center",s),...t,children:[e.jsx(Qe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(Xe,{className:"absolute h-full bg-primary"})}),e.jsx(Ze,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));le.displayName=ve.displayName;const Js=fe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=x.forwardRef(({className:s,...t},a)=>e.jsx(je,{ref:a,className:v(Js(),s),...t}));g.displayName=je.displayName;const _=x.forwardRef(({className:s,...t},a)=>e.jsx(ye,{className:v("grid gap-2",s),...t,ref:a}));_.displayName=ye.displayName;const j=x.forwardRef(({className:s,...t},a)=>e.jsx(be,{ref:a,className:v("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(es,{className:"flex items-center justify-center",children:e.jsx(ss,{className:"h-3.5 w-3.5 fill-primary"})})}));j.displayName=be.displayName;const he={assessment:{id:"assessment",title:"Pain Assessment",severity:"none",icon:Ne,content:["Conduct a comprehensive pain history: Location, Quality, Intensity (score), Timing (onset, duration, frequency), Radiation, Aggravating/Relieving factors, Associated symptoms.","Assess impact on function: Activities of Daily Living (ADLs), sleep, mood, appetite, social interaction.","Evaluate psychosocial factors: Anxiety, depression, coping mechanisms, spiritual beliefs, cultural background, financial concerns.","Perform relevant physical examination: Identify potential pain generators, neurological deficits.","Review past medical history, previous pain treatments and their effectiveness/side effects."],tools:["Numeric Rating Scale (NRS 0-10)","Visual Analog Scale (VAS)","Wong-Baker FACES Scale","Edmonton Symptom Assessment System (ESAS)","Pain Diary/Log"],handbookSectionId:"pain-assessment-details"},mild:{id:"mild",title:"Mild Pain (NRS 1-3)",severity:"mild",icon:q,drugInfo:"Non-Opioid Analgesics +/- Adjuvants",recommendations:["Acetaminophen (Paracetamol): Up to 1g QID (max 3-4g/day). Monitor LFTs with prolonged use or risk factors.","NSAIDs (e.g., Ibuprofen, Naproxen, Celecoxib): Use lowest effective dose for shortest duration. Consider GI protection (PPI) and monitor renal function/BP. Avoid in high-risk patients (renal impairment, heart failure, history of GI bleed).","Adjuvants: Consider based on pain type (e.g., topical lidocaine for localized neuropathic pain, low-dose TCA/gabapentinoid if neuropathic component suspected)."],nonPharm:["Heat/cold application","Positioning, supportive devices (pillows, braces)","Gentle stretching/exercise","Distraction (music, reading, conversation)","Relaxation techniques (deep breathing, mindfulness)","Transcutaneous Electrical Nerve Stimulation (TENS)"],redFlags:["Pain persisting > 1-2 weeks despite measures","New neurological symptoms","Pain disproportionate to apparent cause"],suggestions:["Ensure regular dosing of Acetaminophen/NSAIDs if pain is constant.","Re-evaluate diagnosis if pain doesn't respond as expected."]},moderate:{id:"moderate",title:"Moderate Pain (NRS 4-6)",severity:"moderate",icon:q,drugInfo:"Weak Opioids +/- Non-Opioids/Adjuvants",recommendations:["Weak Opioids: Codeine (often in combination products), Tramadol. Start low, titrate cautiously. Monitor for constipation, nausea, sedation, dizziness.","Continue/Optimize Non-Opioids: Ensure regular dosing of Acetaminophen/NSAIDs if appropriate.","Add/Titrate Adjuvants: Especially important if neuropathic pain suspected (e.g., Gabapentin, Pregabalin, TCAs like Nortriptyline, SNRIs like Duloxetine).","Consider short-acting opioid for breakthrough pain if using scheduled weak opioid.","Prophylactic laxative regimen recommended with regular opioid use."],nonPharm:["Continue/intensify mild pain strategies","Structured physical therapy/occupational therapy","Psychological support (counseling, CBT)","Acupuncture/Acupressure"],redFlags:["Rapid pain escalation","Opioid side effects limiting titration (sedation, confusion)","Development of opioid tolerance without improvement","Signs of infection at pain site"],suggestions:["Consider adjuvant therapy early if neuropathic features present.","Evaluate for opioid rotation if side effects are problematic.","Assess psychosocial factors contributing to pain."]},severe:{id:"severe",title:"Severe Pain (NRS 7-10)",severity:"severe",icon:q,drugInfo:"Strong Opioids +/- Non-Opioids/Adjuvants",recommendations:["Strong Opioids: Morphine, Oxycodone, Hydromorphone (start with immediate-release). Fentanyl patch for stable, chronic pain (use with caution, requires careful conversion).","Titration: Start low, titrate rapidly based on frequent reassessment and breakthrough dose requirements (typically 10-15% of total daily dose q1-4h PRN).","Equianalgesic Dosing: Use conversion tables carefully when switching opioids or routes. Reduce dose by 25-50% for incomplete cross-tolerance.","Continue Non-Opioids/Adjuvants: Maximize multimodal analgesia.","Essential: Prophylactic bowel regimen (stimulant + softener). Manage other side effects (nausea, sedation).","Consider long-acting/extended-release formulations once pain is stable on IR opioid.","Consultation: Palliative Care / Pain Specialist strongly recommended."],nonPharm:["Continue previous strategies as tolerated","Interventional techniques (consider early): Nerve blocks, epidural/intrathecal analgesia, spinal cord stimulators.","Radiotherapy for bone metastases","Palliative surgery/procedures","Comprehensive psychosocial and spiritual support"],redFlags:["Uncontrolled pain despite aggressive titration","Severe opioid toxicity (respiratory depression, myoclonus, severe sedation/delirium)","Suspected opioid-induced hyperalgesia","New/worsening neurological deficit (e.g., cauda equina syndrome)","Sudden cessation of pain (potential catastrophic event)"],suggestions:["Refer to Interventional Pain Team if inadequate response or dose-limiting side effects.","Consider ketamine infusion for refractory neuropathic/central pain.","Address existential distress contributing to total pain."]}},Qs=s=>{switch(s){case"mild":return"border-l-4 border-green-500 dark:border-green-400";case"moderate":return"border-l-4 border-yellow-500 dark:border-yellow-400";case"severe":return"border-l-4 border-red-500 dark:border-red-400";default:return"border-l-4 border-blue-500 dark:border-blue-400"}};function Xs(s){return s.severity==="none"}const Zs={type:void 0,location:[],duration:void 0,pattern:void 0,aggravators:[],relievers:[]},et=()=>{const{state:s,setPainScore:t}=ie(),[a,d]=D.useState(Zs),o=Object.values(he).map(m=>m.id),[h,n]=x.useState([]),[r,i]=x.useState(null),[c,l]=x.useState(null),u=()=>n(o),y=()=>n([]),p=()=>h.length===o.length?y():u(),b=m=>m===null||m===0?"none":m>=1&&m<=3?"mild":m>=4&&m<=6?"moderate":m>=7&&m<=10?"severe":"none",R=m=>{const f=parseInt(m.target.value,10);if(isNaN(f)){O();return}i(f);const z=b(f),I=z!=="none"?z:null;l(I),I&&!h.includes(I)&&n(B=>[...B,I])},O=()=>{i(null),l(null)},F=m=>{d(f=>({...f,type:m}))},G=m=>{d(f=>({...f,pattern:m}))},Re=m=>{d(f=>({...f,duration:m}))},Oe=m=>m>=7?"text-red-600":m>=4?"text-yellow-600":"text-green-600",Fe=m=>{t(m[0])};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("section",{className:"p-4 bg-white dark:bg-slate-800 rounded-xl shadow-md border border-gray-200 dark:border-slate-700",children:e.jsx(H,{children:({open:m})=>e.jsxs(e.Fragment,{children:[e.jsxs(H.Button,{className:"flex justify-between w-full items-center text-left text-lg font-semibold text-gray-900 dark:text-gray-100",children:[e.jsx("span",{children:"Pain Score Evaluator"}),e.jsx(Q,{className:`${m?"transform rotate-180":""} w-5 h-5 text-indigo-500`})]}),e.jsxs(H.Panel,{className:"pt-4 mt-4 border-t border-gray-200 dark:border-slate-700 text-sm text-slate-700 dark:text-slate-300",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsx("label",{htmlFor:"pain-score",className:"font-medium",children:"Select Pain Score (0-10):"}),e.jsxs("select",{id:"pain-score",value:r??"",onChange:R,className:"flex-grow p-2 border rounded-md bg-white dark:bg-slate-700 dark:text-white focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Select score..."}),[...Array(11).keys()].map(f=>e.jsxs("option",{value:f,children:[f," ",f===0?"(None)":f>=1&&f<=3?"(Mild)":f>=4&&f<=6?"(Moderate)":"(Severe)"]},f))]}),e.jsx(C,{onClick:O,variant:"outline",size:"sm",children:"Reset"})]}),r!==null&&e.jsxs("p",{className:"mt-3 text-xs italic",children:["Score ",r," corresponds to ",b(r)," pain. Highlighted card below."]})]})]})})}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3",children:[e.jsx(Ne,{className:"h-6 w-6 text-indigo-500"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Pain Assessment & Management"})]}),e.jsxs(C,{onClick:p,variant:"outline",size:"sm",children:[h.length===o.length?e.jsx(ts,{className:"h-4 w-4 mr-1"}):e.jsx(Q,{className:"h-4 w-4 mr-1"}),h.length===o.length?"Collapse All":"Expand All"]})]}),e.jsx(Ws,{type:"multiple",value:h,onValueChange:n,className:"w-full space-y-4",children:Object.values(he).map(m=>{var B,oe;const z=m.icon,I=m.id===c;return e.jsx(Ie,{value:m.id,className:"border-none",children:e.jsxs(S,{className:v("overflow-hidden rounded-xl shadow-md dark:bg-slate-800/60 backdrop-blur-lg border border-gray-300/30 dark:border-slate-700/50 transition-all duration-300",Qs(m.severity),I&&"ring-2 ring-offset-2 ring-indigo-500 dark:ring-offset-slate-900"),children:[e.jsx(Me,{className:"px-4 py-3 hover:no-underline hover:bg-gray-100/50 dark:hover:bg-slate-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx(z,{className:v("h-5 w-5",m.severity==="none"?"text-blue-500 dark:text-blue-400":m.severity==="mild"?"text-green-500 dark:text-green-400":m.severity==="moderate"?"text-yellow-500 dark:text-yellow-400":"text-red-500 dark:text-red-400")}),e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-gray-100",children:m.title})}),m.handbookSectionId&&e.jsxs("a",{href:`/handbook/${m.handbookSectionId}`,onClick:N=>N.stopPropagation(),className:"ml-auto text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx(as,{className:"h-3 w-3"})," Handbook"]})]})}),e.jsx(Te,{className:"px-4 pt-0 pb-4",children:e.jsx("div",{className:"space-y-4 text-slate-700 dark:text-slate-300 text-sm",children:Xs(m)?e.jsxs(e.Fragment,{children:[m.content.map((N,w)=>e.jsx("p",{children:N},w)),m.tools&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300/50 dark:border-slate-700/50",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-1",children:"Common Tools:"}),e.jsx("ul",{className:"list-disc list-inside pl-2 space-y-1",children:m.tools.map((N,w)=>e.jsx("li",{children:N},w))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2 flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-indigo-500"})," Pharmacological Approach"]}),e.jsx("p",{className:"font-semibold text-indigo-600 dark:text-indigo-400 mb-2",children:m.drugInfo}),e.jsx("ul",{className:"list-disc list-inside pl-2 space-y-1",children:(B=m.recommendations)==null?void 0:B.map((N,w)=>e.jsx("li",{children:N},w))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Non-Pharmacological Tips"}),e.jsx("ul",{className:"list-disc list-inside pl-2 space-y-1",children:(oe=m.nonPharm)==null?void 0:oe.map((N,w)=>e.jsx("li",{children:N},w))})]}),m.redFlags&&m.redFlags.length>0&&e.jsxs("div",{className:"md:col-span-2 mt-2 border-t border-gray-300/50 dark:border-slate-700/50 pt-3",children:[e.jsxs("h4",{className:"font-medium text-red-600 dark:text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(rs,{className:"h-4 w-4"})," Red Flags"]}),e.jsx("ul",{className:"list-disc list-inside pl-2 space-y-1 text-red-700 dark:text-red-300",children:m.redFlags.map((N,w)=>e.jsx("li",{children:N},w))})]})]}),m.suggestions&&m.suggestions.length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-300/50 dark:border-slate-700/50",children:[e.jsxs("h4",{className:"font-medium text-indigo-600 dark:text-indigo-400 mb-2 flex items-center gap-2 text-xs uppercase tracking-wider",children:[e.jsx(E,{className:"h-4 w-4"})," Smart Suggestions"]}),e.jsx("ul",{className:"list-disc list-inside pl-2 space-y-1 text-sm text-indigo-700 dark:text-indigo-300",children:m.suggestions.map((N,w)=>e.jsx("li",{children:N},w))})]})]})})})]})},m.id)})})]}),e.jsx("section",{className:"bg-gradient-to-br from-indigo-50/10 to-purple-50/10 backdrop-blur-lg p-6 rounded-xl border border-white/20 shadow-md\r hover:shadow-xl transition-all duration-300 ease-in-out",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-3",children:[e.jsx(ns,{className:"h-6 w-6 text-indigo-500"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Treatment Guidelines Overview"})]})}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-50/10 to-purple-50/10 backdrop-blur-lg p-6 rounded-xl border border-gray-200/40 dark:border-slate-700/50 shadow-md\r hover:shadow-xl hover:scale-102 transition-all duration-300 ease-in-out",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-3",children:[e.jsx(Se,{className:"h-6 w-6 text-indigo-500"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Monitoring Schedule"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-indigo-50/10 to-purple-50/10 backdrop-blur-lg p-6 rounded-xl border border-gray-200/40 dark:border-slate-700/50 shadow-md\r hover:shadow-xl hover:scale-102 transition-all duration-300 ease-in-out",children:e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-3",children:[e.jsx(is,{className:"h-6 w-6 text-indigo-500"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Outcome Measures"})]})})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(P,{children:"Pain Score"})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"No Pain"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Worst Pain"})]}),e.jsx(le,{defaultValue:[s.painScore],max:10,step:1,onValueChange:Fe}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("span",{className:`text-2xl font-bold ${Oe(s.painScore)}`,children:s.painScore}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"/ 10"})]})]}),s.painScore>=7&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800",children:"Severe Pain"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Immediate intervention required. Consider rescue medication or dose adjustment."})]})]})]})})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(P,{children:"Pain Characteristics"})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Pain Type"}),e.jsxs(_,{value:a.type,onValueChange:F,className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"somatic",id:"somatic"}),e.jsx(g,{htmlFor:"somatic",children:"Somatic"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"visceral",id:"visceral"}),e.jsx(g,{htmlFor:"visceral",children:"Visceral"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"neuropathic",id:"neuropathic"}),e.jsx(g,{htmlFor:"neuropathic",children:"Neuropathic"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"mixed",id:"mixed"}),e.jsx(g,{htmlFor:"mixed",children:"Mixed"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Pattern"}),e.jsxs(_,{value:a.pattern,onValueChange:G,className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"constant",id:"constant"}),e.jsx(g,{htmlFor:"constant",children:"Constant"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"intermittent",id:"intermittent"}),e.jsx(g,{htmlFor:"intermittent",children:"Intermittent"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"breakthrough",id:"breakthrough"}),e.jsx(g,{htmlFor:"breakthrough",children:"Breakthrough"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Duration"}),e.jsxs(_,{value:a.duration,onValueChange:Re,className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"acute",id:"acute"}),e.jsx(g,{htmlFor:"acute",children:"Acute"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"chronic",id:"chronic"}),e.jsx(g,{htmlFor:"chronic",children:"Chronic"})]})]})]})]})})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(P,{children:"Current Medications"})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"No pain medications recorded yet."}),e.jsx(C,{variant:"outline",children:"Add Medication"})]})})]})]})},st=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"})),ue=["Emotional Support","Practical Help","Information/Education","Respite Care","Bereavement Support","Financial Guidance"],tt=()=>{const{state:s,addFamilyMember:t,updateFamilyMember:a}=ie(),[d,o]=D.useState(!1),[h,n]=D.useState({name:"",relationship:"",isMainCaregiver:!1,contactInfo:""}),r=(l,u)=>{n(y=>({...y,[l]:u}))},i=l=>{l.preventDefault();const u={id:crypto.randomUUID(),...h,needsSupport:Array(ue.length).fill(!1)};t(u),n({name:"",relationship:"",isMainCaregiver:!1,contactInfo:""}),o(!1)},c=(l,u,y)=>{const p=s.familyMembers.find(R=>R.id===l);if(!p)return;const b=[...p.needsSupport];b[u]=y,a(l,{needsSupport:b})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Family Support Network"}),e.jsxs(Z,{open:d,onOpenChange:o,children:[e.jsx(ee,{asChild:!0,children:e.jsxs(C,{children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Add Family Member"]})}),e.jsxs(se,{children:[e.jsx(te,{children:e.jsx(ae,{children:"Add Family Member"})}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(U,{id:"name",value:h.name,onChange:l=>r("name",l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"relationship",children:"Relationship"}),e.jsx(U,{id:"relationship",value:h.relationship,onChange:l=>r("relationship",l.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"contactInfo",children:"Contact Information"}),e.jsx(U,{id:"contactInfo",value:h.contactInfo,onChange:l=>r("contactInfo",l.target.value),required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{id:"isMainCaregiver",checked:h.isMainCaregiver,onCheckedChange:l=>r("isMainCaregiver",l)}),e.jsx(g,{htmlFor:"isMainCaregiver",children:"Primary Caregiver"})]}),e.jsx(C,{type:"submit",className:"w-full",children:"Add Member"})]})]})]})]}),s.familyMembers.length===0?e.jsx(S,{children:e.jsxs(A,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"No family members added yet."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Click "Add Family Member" to start building the support network.'})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:s.familyMembers.map(l=>e.jsxs(S,{className:l.isMainCaregiver?"border-l-4 border-l-blue-500":"",children:[e.jsx(k,{children:e.jsxs(P,{className:"flex justify-between items-center",children:[e.jsx("span",{children:l.name}),l.isMainCaregiver&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Primary Caregiver"})]})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Relationship"}),e.jsx("p",{className:"font-medium",children:l.relationship})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Contact"}),e.jsx("p",{className:"font-medium",children:l.contactInfo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Support Needs"}),e.jsx("div",{className:"space-y-2",children:ue.map((u,y)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{id:`${l.id}-${u}`,checked:l.needsSupport[y],onCheckedChange:p=>c(l.id,y,p)}),e.jsx(g,{htmlFor:`${l.id}-${u}`,children:u})]},u))})]})]})})]},l.id))}),s.familyMembers.some(l=>l.needsSupport.includes(!0))&&e.jsx(S,{className:"bg-amber-50 border-amber-200",children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800",children:"Support Needs Identified"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"One or more family members require support. Consider referral to social work or support services."})]})]})})})]})},at=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:"Module"})),rt=["DNR","LivingWill","PowerOfAttorney","Other"],nt={completed:"text-green-600",pending:"text-amber-600",notStarted:"text-gray-600"},it={completed:ms,pending:Se,notStarted:ds},lt=()=>{const{state:s,updateAdvanceDirective:t}=ie(),[a,d]=D.useState({type:"DNR",status:"notStarted",details:"",documents:[]}),o=r=>{r.preventDefault();const i={id:crypto.randomUUID(),...a,dateCompleted:a.status==="completed"?new Date().toISOString():void 0};t(i),d({type:"DNR",status:"notStarted",details:"",documents:[]})},h=async()=>{const r={patientDirectives:s.advanceDirectives,exportDate:new Date().toISOString(),facilityInfo:"OncoVista Medical Center"},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),c=URL.createObjectURL(i),l=document.createElement("a");l.href=c,l.download="advance-directives.json",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(c)},n=r=>{const i=it[r];return e.jsx(i,{className:`w-5 h-5 ${nt[r]}`})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Advance Directives"}),e.jsxs(C,{onClick:h,variant:"outline",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Export Documents"]})]}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(P,{children:"New Directive"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(g,{children:"Type of Directive"}),e.jsx(_,{value:a.type,onValueChange:r=>d(i=>({...i,type:r})),className:"grid grid-cols-2 gap-4 mt-2",children:rt.map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:r,id:r}),e.jsx(g,{htmlFor:r,children:r.replace(/([A-Z])/g," $1").trim()})]},r))})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Status"}),e.jsxs(_,{value:a.status,onValueChange:r=>d(i=>({...i,status:r})),className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"completed",id:"completed"}),e.jsx(g,{htmlFor:"completed",children:"Completed"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"pending",id:"pending"}),e.jsx(g,{htmlFor:"pending",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:"notStarted",id:"notStarted"}),e.jsx(g,{htmlFor:"notStarted",children:"Not Started"})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{children:"Details"}),e.jsx(Ce,{value:a.details,onChange:r=>d(i=>({...i,details:r.target.value})),className:"mt-2",placeholder:"Enter any relevant details or notes..."})]}),e.jsxs(C,{type:"submit",children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),"Add Directive"]})]})})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:s.advanceDirectives.map(r=>e.jsxs(S,{children:[e.jsx(k,{children:e.jsxs(P,{className:"flex justify-between items-center",children:[e.jsx("span",{children:r.type.replace(/([A-Z])/g," $1").trim()}),n(r.status)]})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium capitalize",children:r.status})]}),r.dateCompleted&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Completed"}),e.jsx("p",{className:"font-medium",children:new Date(r.dateCompleted).toLocaleDateString()})]}),r.details&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Details"}),e.jsx("p",{className:"text-sm mt-1",children:r.details})]}),r.documents.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Documents"}),e.jsx("ul",{className:"list-disc list-inside text-sm",children:r.documents.map((i,c)=>e.jsx("li",{children:i},c))})]})]})})]},r.id))})]})},ot=Object.freeze(Object.defineProperty({__proto__:null,default:lt},Symbol.toStringTag,{value:"Module"})),ct=(s="")=>`${s}${Date.now()}-${Math.random().toString(36).substr(2,9)}`;function _e(s,t="desc"){return[...s].sort((a,d)=>{const o=new Date(a.date).getTime(),h=new Date(d.date).getTime();return t==="asc"?o-h:h-o})}const pe="palliative-psychosocial-assessments",dt=()=>{const[s,t]=x.useState(()=>{const n=localStorage.getItem(pe);return n?JSON.parse(n):[]});return x.useEffect(()=>{localStorage.setItem(pe,JSON.stringify(s))},[s]),{assessments:s,addAssessment:(n,r,i)=>{const c={id:ct(),type:n,score:r,notes:i,date:new Date().toISOString()};t(l=>[...l,c])},deleteAssessment:n=>{t(r=>r.filter(i=>i.id!==n))},updateAssessment:(n,r)=>{t(i=>i.map(c=>c.id===n?{...c,...r}:c))},getAssessmentsByType:n=>s.filter(r=>r.type===n)}},mt=s=>{const t=typeof s=="string"?new Date(s):s;return xs(t)?V(t,"PPP"):"Invalid Date"},xt=({assessments:s,type:t})=>{var i;const a=x.useMemo(()=>{const c=s.filter(p=>p.type===t),l=_e(c,"asc"),u=new Date;return Array.from({length:30},(p,b)=>{const R=hs(u,29-b),O=V(R,"yyyy-MM-dd"),F=l.find(G=>V(new Date(G.date),"yyyy-MM-dd")===O);return{date:O,score:(F==null?void 0:F.score)??null}})},[s,t]),d={distress:"Distress Level",anxiety:"Anxiety Level",depression:"Depression Level",social:"Social Support"}[t],h=(()=>{switch(t){case"distress":case"anxiety":case"depression":return E;case"social":return we;default:return E}})(),n=(i=a.filter(c=>c.score!==null).slice(-1)[0])==null?void 0:i.score,r=x.useMemo(()=>{const c=a.filter(l=>l.score!==null).map(l=>l.score);return c.length?(c.reduce((l,u)=>l+u,0)/c.length).toFixed(1):"N/A"},[a]);return e.jsxs(S,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(P,{className:"text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"}),d]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Latest"}),e.jsx("span",{className:"font-bold",children:n??"N/A"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Average"}),e.jsx("span",{className:"font-bold",children:r})]})]})]}),e.jsx(A,{children:e.jsx("div",{className:"h-[200px]",children:e.jsx(us,{width:"100%",height:"100%",children:e.jsxs(ps,{data:a,margin:{top:5,right:5,bottom:5,left:5},children:[e.jsx(gs,{type:"monotone",dataKey:"score",stroke:"#8b5cf6",fill:"#8b5cf680",strokeWidth:2,dot:c=>c.payload.score===null?null:e.jsx("circle",{cx:c.cx,cy:c.cy,r:4,fill:"#8b5cf6",stroke:"#fff",strokeWidth:2,className:"recharts-dot"})}),e.jsx(fs,{dataKey:"date",tickFormatter:c=>V(new Date(c),"MMM d"),fontSize:12,tickMargin:8}),e.jsx(vs,{domain:[0,10],ticks:[0,2,4,6,8,10],fontSize:12,tickMargin:8}),e.jsx(js,{contentStyle:{background:"#fff",border:"1px solid #e2e8f0",borderRadius:"6px"},labelFormatter:c=>V(new Date(c),"MMM d, yyyy"),formatter:c=>[c||"No data",d]})]})})})})]})},X=[{type:"distress",label:"Distress",icon:E},{type:"anxiety",label:"Anxiety",icon:E},{type:"depression",label:"Depression",icon:E},{type:"social",label:"Social Support",icon:we}],ht=({onSubmit:s})=>{const[t,a]=x.useState(!1),[d,o]=x.useState("distress"),[h,n]=x.useState(5),[r,i]=x.useState(""),c=l=>{l.preventDefault(),s(d,h,r),a(!1),n(5),i("")};return e.jsxs(Z,{open:t,onOpenChange:a,children:[e.jsx(ee,{asChild:!0,children:e.jsxs(C,{children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"New Assessment"]})}),e.jsxs(se,{children:[e.jsx(te,{children:e.jsx(ae,{children:"New Assessment"})}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Assessment Type"}),e.jsx(re,{value:d,onValueChange:l=>o(l),children:e.jsx(ne,{className:"grid grid-cols-2 gap-2",children:X.map(({type:l,label:u})=>e.jsx(Y,{value:l,className:"w-full",children:u},l))})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Score (0-10)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{value:[h],onValueChange:([l])=>n(l),max:10,step:1,className:"flex-1"}),e.jsx("span",{className:"font-medium",children:h})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Notes"}),e.jsx(Ce,{value:r,onChange:l=>i(l.target.value),placeholder:"Add any relevant notes...",className:"h-24"})]}),e.jsx(C,{type:"submit",className:"w-full",children:"Save Assessment"})]})]})]})},ut=()=>{const{assessments:s,addAssessment:t}=dt(),a=(d,o,h)=>{t(d,o,h)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Psychosocial Assessment"}),e.jsx(ht,{onSubmit:a})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:X.map(({type:d})=>e.jsx(xt,{assessments:s,type:d},d))}),e.jsxs(S,{children:[e.jsx(k,{children:e.jsx(P,{children:"Recent Assessments"})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:_e(s).slice(0,5).map(d=>{const{type:o,score:h,notes:n,date:r,id:i}=d,c=X.find(u=>u.type===o),l=(c==null?void 0:c.icon)||E;return e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border",children:[e.jsx(l,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"font-medium",children:c==null?void 0:c.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:mt(r)})]}),e.jsxs("p",{className:"mt-1",children:["Score: ",h,"/10"]}),n&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:n})]})]},i)})})})]})]})},pt=Object.freeze(Object.defineProperty({__proto__:null,default:ut},Symbol.toStringTag,{value:"Module"}));export{yt as P,$ as _};
//# sourceMappingURL=module-palliative-D6Lec8M4.js.map
